@* Copyright 2012 Fabian Steeg. Licensed under the Eclipse Public License 1.0 *@

@(docs: List[Document], docForm: Form[Document], index: Int)

@import helper._
@import helper.twitterBootstrap._
@import org.culturegraph.semanticweb.sink.AbstractModelWriter.Format

@main("Document list") {

    <h1>Search in '@Document.esIndex' on '@Document.ES_CLUSTER_NAME' (@Document.ES_SERVER.address())</h1>

    @form(routes.Application.setIndex(), 'class -> "form-horizontal") {
		<select name="index" id="index" onChange="this.form.submit()">
			@for(i<-Application.INDEXES){
				<option value="@i" @if(index==Application.INDEXES.indexOf(i)){selected="selected"}else{}>
					@i
				</option>
			}
		</select>
    }
    
    @form(routes.Application.doSearch(), 'class -> "form-horizontal") {
	    <input type="text" name="author" id="author" class="autocomplete"
			data-url="@{routes.Application.autocompleteSearch()}"
			placeholder="@(Document.searchField.split("#")(1))"/>
		<div id="button"><button type="submit" class="btn">Search</button></div>
	    <script>
	    $('input.autocomplete').each( function() {
	        var $input = $(this);
	        var serverUrl = $input.data('url');
	        $input.autocomplete({ source:serverUrl });
	    });
	    </script>
    }

    <h1>@docs.size() @if(docs.size() == 1) { Document } else { Documents }</h1>
    
    @for(doc <- docs) {
        <h2>@doc.id</h2>
        <dl>
        	<dt><b>JLD</b></dt><dd>@doc.source</dd>
        	<dt><b>NT</b></dt><dd>@doc.as(Format.N_TRIPLE)</dd>
        	<dt><b>N3</b></dt><dd>@doc.as(Format.N3)</dd>
        	<dt><b>TTL</b></dt><dd>@doc.as(Format.TURTLE)</dd>
        	<dt><b>XML</b></dt><dd>@doc.as(Format.RDF_XML)</dd>
        </dl>
    }
}
